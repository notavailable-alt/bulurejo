<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal UMKM Digital - Bulurejo Monggol</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="manifest" href="manifest.json">
    <style>
        /* === VARIABLES & RESET === */
        :root {
            --primary-color: #2E7D32;
            --primary-dark: #1B5E20;
            --primary-light: #4CAF50;
            --secondary-color: #FF9800;
            --accent-color: #FF4081;
            --background: #f8f9fa;
            --text: #333;
            --card-bg: #ffffff;
            --border: #E8F5E8;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .dark-mode {
            --primary-color: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #81C784;
            --background: #1a1a1a;
            --text: #ffffff;
            --card-bg: #2d2d2d;
            --border: #404040;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background-color: var(--background);
            transition: all 0.3s ease;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* === HEADER === */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1rem 0;
            position: relative;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo h1 {
            font-size: 1.5rem;
        }

        .mobile-logo {
            display: none;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* === MOBILE MENU TOGGLE === */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }

        .menu-toggle span {
            display: block;
            height: 3px;
            width: 100%;
            background-color: white;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* === NAVIGATION === */
        nav {
            background: var(--primary-dark);
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .nav-container {
            display: flex;
            justify-content: center;
            position: relative;
        }

        .nav-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            padding: 1rem 0;
            transition: all 0.3s ease;
        }

        .nav-btn {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.8rem 1.2rem;
            border-radius: 25px;
            transition: all 0.3s;
            background: rgba(255,255,255,0.1);
            border: 2px solid transparent;
            cursor: pointer;
            white-space: nowrap;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--primary-light);
            border-color: white;
            transform: translateY(-2px);
        }

        /* === MOBILE NAVIGATION === */
        @media (max-width: 768px) {
            .menu-toggle {
                display: flex;
            }

            .logo h1 {
                display: none;
            }

            .mobile-logo {
                display: block;
                font-size: 1.2rem;
                font-weight: bold;
            }

            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: var(--primary-dark);
                flex-direction: column;
                justify-content: flex-start;
                align-items: center;
                padding: 2rem 0;
                gap: 1rem;
                transition: left 0.3s ease;
                overflow-y: auto;
                z-index: 999;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-btn {
                width: 90%;
                text-align: center;
                padding: 1rem;
                border-radius: 10px;
                font-size: 1.1rem;
            }

            .header-controls {
                gap: 0.5rem;
            }

            .logo {
                flex: 1;
            }
        }

        /* === NOTIFICATION BELL === */
        .notification-bell {
            position: relative;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .notification-bell:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .notifications-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-hover);
            z-index: 1002;
            display: none;
            border: 1px solid var(--border);
        }

        .notifications-panel.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .notification-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.3s;
        }

        .notification-item:hover {
            background: var(--primary-light);
            color: white;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        /* === DARK MODE TOGGLE === */
        .dark-mode-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .dark-mode-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        /* === LANGUAGE SELECTOR === */
        .language-selector select {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
        }

        /* === LOGIN/REGISTER MODAL === */
        .auth-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .auth-modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            color: var(--text);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 1rem;
        }

        .auth-tab {
            flex: 1;
            padding: 10px;
            background: var(--border);
            border: none;
            cursor: pointer;
            border-radius: 6px 6px 0 0;
        }

        .auth-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .auth-form input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        .auth-form button {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .language-selector select option {
            color: #333;
        }

        /* === HERO SECTION === */
        .hero-section {
            position: relative;
            height: 400px;
            overflow: hidden;
            border-radius: 12px;
            margin: 2rem 0;
        }

        .hero-section img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 2rem;
        }

        .hero-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero-content button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .hero-content button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* === LIVE STATS === */
        .live-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2rem;
        }

        .stat-info {
            flex: 1;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* === SEARCH BAR === */
        .search-container {
            margin: 2rem 0;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .search-bar input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            background: var(--card-bg);
            color: var(--text);
        }

        .search-bar button {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        .search-bar button:hover {
            background: var(--primary-dark);
        }

        .advanced-search {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .advanced-search select {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        /* === SECTIONS === */
        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            border-left: 5px solid var(--primary-color);
            padding-left: 15px;
        }

        /* === TOKO GRID === */
        .toko-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        /* === TOKO CARD === */
        .toko-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border);
            position: relative;
        }

        .toko-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .promo-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-color);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        .offer-tag {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--secondary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        .toko-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .toko-info {
            padding: 1.5rem;
        }

        .toko-info h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .toko-info p {
            margin-bottom: 0.5rem;
            color: var(--text);
            opacity: 0.8;
        }

        /* === RATING STARS === */
        .rating-stars {
            display: flex;
            align-items: center;
            gap: 5px;
            margin: 0.5rem 0;
        }

        .star {
            color: #FFD700;
            font-size: 1.2rem;
        }

        .rating-value {
            margin-left: 10px;
            font-weight: bold;
            color: var(--text);
        }

        /* === TOMBOL AKSI === */
        .toko-actions {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }

        .btn-detail, .btn-wa, .btn-ig, .btn-review, .btn-cart {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            text-align: center;
            flex: 1;
            transition: all 0.3s;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .btn-cart {
            background: #FF9800;
            color: white;
        }

        .btn-cart:hover {
            background: #F57C00;
        }

        .btn-detail {
            background: #6c757d;
            color: white;
        }

        .btn-detail:hover {
            background: #5a6268;
        }

        .btn-wa {
            background: #25D366;
            color: white;
        }

        .btn-wa:hover {
            background: #128C7E;
        }

        .btn-ig {
            background: #E4405F;
            color: white;
        }

        .btn-ig:hover {
            background: #C13584;
        }

        .btn-review {
            background: #2196F3;
            color: white;
        }

        .btn-review:hover {
            background: #1976D2;
        }

        /* === TESTIMONIALS === */
        .testimonials {
            margin: 3rem 0;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .testimonial-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-color);
            transition: transform 0.3s;
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
        }

        .testimonial-card p {
            font-style: italic;
            margin-bottom: 1rem;
            color: var(--text);
        }

        .testimonial-card span {
            color: var(--primary-color);
            font-weight: 500;
        }

        /* === ARTICLES SECTION === */
        .articles-section {
            margin: 3rem 0;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .article-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .article-card:hover {
            transform: translateY(-5px);
        }

        .article-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .article-card p {
            color: var(--text);
            margin-bottom: 1rem;
            opacity: 0.8;
        }

        .article-card a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .article-card a:hover {
            text-decoration: underline;
        }

        /* === EVENTS SECTION === */
        .events-section {
            margin: 3rem 0;
        }

        .events-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .calendar {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-header button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .calendar-day:hover {
            background: var(--primary-light);
            color: white;
        }

        .calendar-day.event {
            background: var(--primary-color);
            color: white;
        }

        .calendar-day.today {
            background: var(--secondary-color);
            color: white;
        }

        .upcoming-events {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .event-list {
            margin-top: 1rem;
        }

        .event-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-date {
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        /* === LOYALTY PROGRAM === */
        .loyalty-section {
            margin: 3rem 0;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .loyalty-program {
            text-align: center;
        }

        .points-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 1rem 0;
        }

        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .reward-item {
            background: var(--background);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border: 2px solid var(--border);
        }

        .reward-item.unlocked {
            border-color: var(--primary-color);
            background: var(--primary-light);
            color: white;
        }

        /* === ACHIEVEMENTS === */
        .achievements-section {
            margin: 3rem 0;
        }

        .achievement-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .achievement {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: var(--shadow);
        }

        .achievement.unlocked {
            border-left: 4px solid var(--primary-color);
        }

        .achievement.locked {
            opacity: 0.6;
            border-left: 4px solid #ccc;
        }

        .achievement-icon {
            font-size: 2rem;
        }

        /* === VENDOR DASHBOARD === */
        .vendor-dashboard {
            margin: 3rem 0;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: var(--background);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .dashboard-card h3 {
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .dashboard-card .stat {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .sales-chart {
            margin-top: 2rem;
            height: 300px;
        }

        /* === SOCIAL FEATURES === */
        .social-share {
            margin: 1rem 0;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .social-share button {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .social-share button:hover {
            transform: translateY(-2px);
        }

        .social-feed {
            margin: 2rem 0;
        }

        .instagram-feed {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .instagram-post {
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .instagram-post img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .post-caption {
            padding: 1rem;
            font-size: 0.9rem;
        }

        /* === LIVE CHAT === */
        .live-chat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-button {
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: var(--shadow-hover);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-window {
            position: absolute;
            bottom: 60px;
            right: 0;
            width: 350px;
            height: 400px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-hover);
            display: none;
            flex-direction: column;
            border: 1px solid var(--border);
        }

        .chat-window.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-header {
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            padding: 8px 12px;
            border-radius: 12px;
            max-width: 80%;
        }

        .message.user {
            background: var(--primary-light);
            color: white;
            align-self: flex-end;
        }

        .message.bot {
            background: var(--border);
            align-self: flex-start;
        }

        .chat-input {
            padding: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        .chat-input button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        /* === AI CHATBOT === */
        .ai-assistant {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
        }

        .chatbot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chatbot-messages {
            height: 200px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            background: var(--background);
        }

        .bot-message {
            background: var(--primary-light);
            color: white;
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            max-width: 80%;
        }

        .user-message {
            background: var(--border);
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            max-width: 80%;
            margin-left: auto;
        }

        .chatbot-input {
            display: flex;
            gap: 10px;
        }

        .chatbot-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        .chatbot-input button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
        }

        /* === VIDEO SECTION === */
        .video-section {
            margin: 2rem 0;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            border-radius: 12px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* === PROGRESS BARS === */
        .user-progress {
            margin: 2rem 0;
        }

        .progress-item {
            margin-bottom: 1rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            background: var(--border);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--primary-color);
            height: 100%;
            transition: width 0.3s ease;
        }

        /* === LOADING SPINNER === */
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading-spinner.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* === FOOTER === */
        footer {
            background: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        /* === MODAL STYLES === */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            color: var(--text);
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 1rem;
            top: 1rem;
        }

        .close:hover {
            color: var(--text);
        }

        /* === GALLERY SECTION === */
        .gallery-section {
            margin: 2rem 0;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .gallery-grid img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-grid img:hover {
            transform: scale(1.05);
        }

        /* === WHATSAPP BUSINESS INTEGRATION STYLES === */
        .whatsapp-templates {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            border-radius: 15px;
            color: white;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .template-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .template-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(37, 211, 102, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .template-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .template-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .template-description {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .template-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-whatsapp:hover {
            background: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
        }

        .btn-customize {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-customize:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .whatsapp-custom-modal {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .whatsapp-custom-content {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            border-radius: 15px;
            padding: 2rem;
            max-width: 500px;
            width: 95%;
            color: white;
        }

        .custom-message-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .custom-message-form textarea {
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            resize: vertical;
            min-height: 120px;
        }

        .custom-message-form textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .custom-message-form textarea:focus {
            outline: none;
            border-color: #fff;
            background: rgba(255, 255, 255, 0.2);
        }

        .message-preview {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .message-preview h4 {
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .message-preview p {
            font-size: 0.9rem;
            line-height: 1.4;
            opacity: 0.9;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .template-grid {
                grid-template-columns: 1fr;
            }

            .template-actions {
                flex-direction: column;
            }
        }

        /* === ANALYTICS DASHBOARD STYLES === */
        .analytics-section {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .analytics-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            transition: all 0.3s;
        }

        .analytics-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .analytics-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .analytics-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .analytics-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .analytics-chart-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .analytics-chart-container h3 {
            margin-bottom: 1rem;
            text-align: center;
            color: #fff;
        }

        /* === NOTIFICATION SYSTEM STYLES === */
        .notification-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            max-height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .notification-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .notification-item:hover {
            background: #f8f9fa;
        }

        .notification-item.unread {
            background: #e3f2fd;
            border-left: 4px solid var(--primary-color);
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #333;
        }

        .notification-message {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .notification-time {
            font-size: 0.8rem;
            color: #999;
        }

        .notification-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .analytics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .notification-panel {
                width: calc(100vw - 40px);
                right: 20px;
                left: 20px;
            }
        }

        /* === BOOKING SYSTEM STYLES === */
        .booking-section {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .booking-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .booking-form-group {
            display: flex;
            flex-direction: column;
        }

        .booking-form-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #fff;
        }

        .booking-form-group input,
        .booking-form-group select,
        .booking-form-group textarea {
            padding: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .booking-form-group input::placeholder,
        .booking-form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .booking-form-group input:focus,
        .booking-form-group select:focus,
        .booking-form-group textarea:focus {
            outline: none;
            border-color: #fff;
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-nav {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .calendar-nav:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .calendar-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            padding: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            position: relative;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-day.selected {
            background: #fff;
            color: #667eea;
            font-weight: 700;
        }

        .calendar-day.today {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        .calendar-day.disabled {
            color: rgba(255, 255, 255, 0.4);
            cursor: not-allowed;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .time-slot {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .time-slot:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .time-slot.selected {
            background: #fff;
            color: #667eea;
            border-color: #fff;
            font-weight: 600;
        }

        .time-slot.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .booking-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .booking-summary h3 {
            margin-bottom: 1rem;
            color: #fff;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .btn-booking {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
            width: 100%;
        }

        .btn-booking:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
        }

        .btn-booking:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .booking-form {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .calendar-container {
                padding: 1rem;
            }

            .time-slots {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* === LIGHTBOX STYLES === */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .lightbox-nav:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .lightbox-prev {
            left: -70px;
        }

        .lightbox-next {
            right: -70px;
        }

        .lightbox-close {
            position: absolute;
            top: -60px;
            right: 0;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .lightbox-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .lightbox-counter {
            position: absolute;
            bottom: -40px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .lightbox-thumbnails {
            position: absolute;
            bottom: -120px;
            display: flex;
            gap: 10px;
            max-width: 90vw;
            overflow-x: auto;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }

        .lightbox-thumbnail {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .lightbox-thumbnail.active {
            opacity: 1;
            border-color: var(--primary-color);
        }

        .lightbox-thumbnail:hover {
            opacity: 0.8;
        }

        /* Mobile lightbox adjustments */
        @media (max-width: 768px) {
            .lightbox-nav {
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
            }

            .lightbox-prev {
                left: -50px;
            }

            .lightbox-next {
                right: -50px;
            }

            .lightbox-close {
                top: -50px;
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
            }

            .lightbox-thumbnails {
                bottom: -100px;
            }

            .lightbox-thumbnail {
                width: 50px;
                height: 50px;
            }
        }

        /* === MAP SECTION === */
        .map-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #umkmMap {
            height: 400px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }

        /* Map Legend Styles */
        .map-legend {
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            font-size: 12px;
            line-height: 1.4;
        }

        .map-legend h4 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: bold;
            color: #2E7D32;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* UMKM Marker Styles */
        .umkm-marker {
            border: none !important;
            background: none !important;
        }

        /* === BOOKING SECTION === */
        .booking-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .booking-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }

        .booking-form input,
        .booking-form select,
        .booking-form textarea {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        .booking-form button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
        }

        .booking-form button:hover {
            background: var(--primary-dark);
        }

        .calendar-booking {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--background);
            border-radius: 8px;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .time-slot {
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-slot:hover {
            background: var(--primary-light);
            color: white;
        }

        .time-slot.selected {
            background: var(--primary-color);
            color: white;
        }

        /* === REVIEW FORM === */
        .review-form {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .review-form.active {
            display: block;
        }

        .review-stars {
            display: flex;
            gap: 5px;
            margin: 0.5rem 0;
        }

        .review-star {
            font-size: 1.5rem;
            cursor: pointer;
            color: #ddd;
            transition: color 0.3s;
        }

        .review-star.active {
            color: #FFD700;
        }

        /* === CART & CHECKOUT === */
        .cart-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .cart-modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            color: var(--text);
            max-height: 80vh;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-total {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 1rem;
            text-align: right;
        }

        .checkout-form {
            margin-top: 1rem;
            display: none;
        }

        .checkout-form.active {
            display: block;
        }

        .checkout-form input, .checkout-form select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text);
        }

        /* === PAYMENT GATEWAY STYLES === */
        .payment-gateways {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .payment-gateway-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .payment-gateway-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .payment-gateway-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .payment-gateway-card.selected {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .payment-gateway-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .payment-gateway-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .payment-gateway-desc {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .payment-gateway-features {
            font-size: 0.8rem;
            opacity: 0.8;
            text-align: left;
        }

        .payment-gateway-features ul {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0 0 0;
        }

        .payment-gateway-features li {
            margin-bottom: 0.25rem;
            padding-left: 1rem;
            position: relative;
        }

        .payment-gateway-features li:before {
            content: "";
            position: absolute;
            left: 0;
            color: #4CAF50;
        }

        .payment-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .payment-summary h3 {
            margin-bottom: 1rem;
            color: #fff;
        }

        .payment-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .payment-summary-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .btn-payment {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
            width: 100%;
        }

        .btn-payment:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
        }

        .btn-payment:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .payment-status {
            text-align: center;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 12px;
            margin: 2rem 0;
            display: none;
        }

        .payment-status.success {
            border-left: 4px solid #4CAF50;
            display: block;
        }

        .payment-status.error {
            border-left: 4px solid #f44336;
            display: block;
        }

        .payment-status-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .payment-status.success .payment-status-icon {
            color: #4CAF50;
        }

        .payment-status.error .payment-status-icon {
            color: #f44336;
        }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: row;
                gap: 1rem;
            }

            .header-controls {
                width: auto;
                justify-content: flex-end;
            }

            .search-bar, .advanced-search {
                flex-direction: column;
            }

            .toko-actions {
                flex-direction: column;
            }

            .hero-content h1 {
                font-size: 2rem;
            }

            .stats-section, .live-stats {
                grid-template-columns: 1fr;
            }

            .events-content {
                grid-template-columns: 1fr;
            }

            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.8rem;
            }

            .chat-window {
                width: 90vw;
                right: 5vw;
            }

            .notifications-panel {
                width: 90vw;
                right: 5vw;
            }

            .language-selector, .dark-mode-toggle {
                font-size: 0.9rem;
                padding: 6px 10px;
            }

            .hero-section {
                height: 300px;
            }

            .logo h1 {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }

            .hero-content h1 {
                font-size: 1.5rem;
            }

            .hero-content p {
                font-size: 0.9rem;
            }

            section h2 {
                font-size: 1.5rem;
            }

            .stat-card {
                padding: 1rem;
            }

            .stat-number {
                font-size: 1.5rem;
            }
        }

        .category-icon {
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }

        /* Pulse animation for live elements */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .live-pulse {
            animation: pulse 2s infinite;
        }

        /* Overlay for mobile menu */
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 998;
        }

        .menu-overlay.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- === HEADER === -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="mobile-logo"> UMKM Bulurejo</div>
                    <h1>Portal UMKM Bulurejo Monggol</h1>
                </div>
                <div class="header-controls">
                    <div class="language-selector">
                        <select onchange="changeLanguage(this.value)">
                            <option value="id"> ID</option>
                            <option value="en"> EN</option>
                            <option value="jv"> JV</option>
                        </select>
                    </div>
                    <button class="dark-mode-toggle" onclick="toggleDarkMode()">
                         Dark
                    </button>
                    <button onclick="openCartModal()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer;"> Keranjang</button>
                    <button onclick="openAuthModal()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer;">Login</button>
                    <div class="notification-bell" onclick="toggleNotifications()">
                         <span class="notification-count">3</span>
                    </div>
                    <button class="menu-toggle" id="menuToggle" onclick="toggleMobileMenu()">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- === MOBILE MENU OVERLAY === -->
    <div class="menu-overlay" id="menuOverlay" onclick="toggleMobileMenu()"></div>

    <!-- === NOTIFICATIONS PANEL === -->
    <div class="notifications-panel" id="notificationsPanel">
        <div class="notification-header">
            <h3>Notifikasi</h3>
            <span onclick="clearNotifications()" style="cursor: pointer;">Hapus Semua</span>
        </div>
        <div class="notification-item">
            <strong>Promo Baru!</strong> Sewa Tenda diskon 15% untuk bulan ini
        </div>
        <div class="notification-item">
            <strong>Stok Terbaru</strong> Kayu jati grade A ready stock
        </div>
        <div class="notification-item">
            <strong>Event Mendatang</strong> Pameran UMKM desa tanggal 15 Desember
        </div>
    </div>

    <!-- === NAVIGATION === -->
    <nav>
        <div class="container">
            <div class="nav-container">
                <div class="nav-menu" id="navMenu">
                    <a class="nav-btn active" onclick="showSection('home'); toggleMobileMenu();">
                        <span class="category-icon"></span>Beranda
                    </a>
                    <a class="nav-btn" onclick="showSection('jasa'); toggleMobileMenu();">
                        <span class="category-icon"></span>Jasa Sewa
                    </a>
                    <a class="nav-btn" onclick="showSection('mebel'); toggleMobileMenu();">
                        <span class="category-icon"></span>Kayu & Mebel
                    </a>
                    <a class="nav-btn" onclick="showSection('kesenian'); toggleMobileMenu();">
                        <span class="category-icon"></span>Kesenian
                    </a>
                    <a class="nav-btn" onclick="showSection('warung'); toggleMobileMenu();">
                        <span class="category-icon"></span>Warung & Kuliner
                    </a>
                    <a class="nav-btn" onclick="showSection('otomotif'); toggleMobileMenu();">
                        <span class="category-icon"></span>Otomotif
                    </a>
                    <a class="nav-btn" onclick="showSection('peternakan'); toggleMobileMenu();">
                        <span class="category-icon"></span>Peternakan
                    </a>
                    <a class="nav-btn" onclick="showSection('vendor'); toggleMobileMenu();">
                        <span class="category-icon"></span>Dashboard
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        <!-- === SEARCH BAR === -->
        <div class="search-container">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Cari usaha atau layanan...">
                <button onclick="searchToko()">Cari</button>
            </div>
            <div class="advanced-search">
                <select id="priceFilter">
                    <option value="">Semua Harga</option>
                    <option value="0-50000">Rp 0 - 50rb</option>
                    <option value="50000-200000">Rp 50rb - 200rb</option>
                    <option value="200000-500000">Rp 200rb - 500rb</option>
                </select>
                <select id="ratingFilter">
                    <option value="">Semua Rating</option>
                    <option value="4"> 4+</option>
                    <option value="3"> 3+</option>
                </select>
                <select id="categoryFilter">
                    <option value="">Semua Kategori</option>
                    <option value="jasa">Jasa Sewa</option>
                    <option value="kayu">Kayu & Mebel</option>
                    <option value="kesenian">Kesenian</option>
                </select>
                <button onclick="advancedSearch()">Filter</button>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner"></div>
            <p>Memuat data...</p>
        </div>

        <!-- === BERANDA === -->
        <section id="home" class="section active">
            <!-- Hero Section -->
            <div class="hero-section">
                <img src="https://i.ibb.co.com/5X0s8DXR/home.png" alt="Pemandangan Bulurejo Monggol">
                <div class="hero-content">
                    <h1>Selamat Datang di Bulurejo Monggol</h1>
                    <p>Desa dengan beragam potensi UMKM yang siap melayani Anda</p>
                    <button onclick="showSection('jasa')">Jelajahi UMKM Kami</button>
                </div>
            </div>

            <!-- Live Stats -->
            <div class="live-stats">
                <div class="stat-card live-pulse">
                    <div class="stat-icon"></div>
                    <div class="stat-info">
                        <span class="stat-number" id="liveVisitors">24</span>
                        <span class="stat-label">Pengunjung Online</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-info">
                        <span class="stat-number" id="todayOrders">8</span>
                        <span class="stat-label">Pesanan Hari Ini</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-info">
                        <span class="stat-number">15+</span>
                        <span class="stat-label">UMKM Terdaftar</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"></div>
                    <div class="stat-info">
                        <span class="stat-number">4.7</span>
                        <span class="stat-label">Rating Rata-rata</span>
                    </div>
                </div>
            </div>

            <!-- AI Assistant -->
            <div class="ai-assistant">
                <div class="chatbot-header">
                    <h4> AI Assistant Bulurejo</h4>
                    <span>Online</span>
                </div>
                <div class="chatbot-messages" id="chatbotMessages">
                    <div class="bot-message">Halo! Saya AI Assistant Bulurejo. Ada yang bisa saya bantu terkait UMKM di desa kami?</div>
                </div>
                <div class="chatbot-input">
                    <input type="text" id="chatbotInput" placeholder="Tanya tentang UMKM...">
                    <button onclick="sendToChatbot()">Kirim</button>
                </div>
            </div>

            <!-- Testimonials -->
            <div class="testimonials">
                <h2> Apa Kata Pelanggan</h2>
                <div class="testimonial-grid">
                    <div class="testimonial-card">
                        <p>"Tenda dan sound systemnya bagus banget, harganya juga terjangkau. Acara pernikahan saya berjalan lancar berkat jasa mereka!"</p>
                        <span>- Budi, Acara Pernikahan</span>
                    </div>
                    <div class="testimonial-card">
                        <p>"Kayu jati kualitasnya premium, recommended banget untuk yang butuh bahan mebel berkualitas!"</p>
                        <span>- Surya, Pengrajin Mebel</span>
                    </div>
                    <div class="testimonial-card">
                        <p>"Reog Singo Barong menghibur sekali! Penari profesional dan kostumnya sangat megah. Puas banget!"</p>
                        <span>- Ika, Acara Khitanan</span>
                    </div>
                </div>
            </div>

            <!-- Events Section -->
            <div class="events-section">
                <h2> Event Bulurejo Monggol</h2>
                <div class="events-content">
                    <div class="calendar">
                        <div class="calendar-header">
                            <button onclick="prevMonth()"></button>
                            <h3 id="currentMonth">Desember 2024</h3>
                            <button onclick="nextMonth()"></button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                    </div>
                    <div class="upcoming-events">
                        <h3>Event Mendatang</h3>
                        <div class="event-list">
                            <div class="event-item">
                                <span class="event-date">15 Des</span>
                                <span class="event-title">Pameran UMKM Desa</span>
                            </div>
                            <div class="event-item">
                                <span class="event-date">20 Des</span>
                                <span class="event-title">Pelatihan Digital Marketing</span>
                            </div>
                            <div class="event-item">
                                <span class="event-date">25 Des</span>
                                <span class="event-title">Natal Bersama UMKM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loyalty Program -->
            <div class="loyalty-section">
                <div class="loyalty-program">
                    <h2> Program Loyalty Bulurejo</h2>
                    <p>Dapatkan poin setiap transaksi dan tukarkan dengan hadiah menarik!</p>
                    <div class="points-display">
                        <span id="userPoints">150</span> Points
                    </div>
                    <div class="rewards-grid">
                        <div class="reward-item">
                            <h4>50 Points</h4>
                            <p>Voucher Diskon 10%</p>
                        </div>
                        <div class="reward-item unlocked">
                            <h4>100 Points</h4>
                            <p>Free Merchandise</p>
                        </div>
                        <div class="reward-item">
                            <h4>200 Points</h4>
                            <p>Paket UMKM Premium</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Achievements -->
            <div class="achievements-section">
                <h2> Achievement Anda</h2>
                <div class="achievement-list">
                    <div class="achievement unlocked">
                        <div class="achievement-icon"></div>
                        <div>
                            <h4>Explorer</h4>
                            <p>Kunjungi 10 UMKM berbeda</p>
                        </div>
                    </div>
                    <div class="achievement">
                        <div class="achievement-icon"></div>
                        <div>
                            <h4>Reviewer</h4>
                            <p>Beri 5 ulasan untuk UMKM</p>
                        </div>
                    </div>
                    <div class="achievement unlocked">
                        <div class="achievement-icon"></div>
                        <div>
                            <h4>Shopper</h4>
                            <p>Lakukan 3 transaksi</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Progress -->
            <div class="user-progress">
                <h2> Progress Profil</h2>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Kelengkapan Profil</span>
                        <span>75%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>UMKM Dikunjungi</span>
                        <span>6/10</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                </div>
            </div>

            <!-- Social Feed -->
            <div class="social-feed">
                <h2> Update Terbaru dari UMKM</h2>
                <div class="social-share">
                    <span>Bagikan portal ini: </span>
                    <button onclick="shareFacebook()" style="background: #3b5998; color: white;"> Facebook</button>
                    <button onclick="shareWhatsApp()" style="background: #25D366; color: white;"> WhatsApp</button>
                    <button onclick="shareInstagram()" style="background: #E4405F; color: white;"> Instagram</button>
                </div>
                <div class="instagram-feed">
                    <div class="instagram-post">
                        <img src="https://images.unsplash.com/photo-1576435728678-68d0fbf94e91?w=300&h=200&fit=crop" alt="Post 1">
                        <div class="post-caption">Promo spesial sewa tenda bulan ini! </div>
                    </div>
                    <div class="instagram-post">
                        <img src="https://images.unsplash.com/photo-1567495243894-6586e5363b38?w=300&h=200&fit=crop" alt="Post 2">
                        <div class="post-caption">Kayu jati kualitas terbaik ready stock! </div>
                    </div>
                    <div class="instagram-post">
                        <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=300&h=200&fit=crop" alt="Post 3">
                        <div class="post-caption">Angkringan Ngelosor buka sampai larut! </div>
                    </div>
                </div>
            </div>

            <!-- Articles Section -->
            <div class="articles-section">
                <h2> Tips & Informasi UMKM</h2>
                <div class="articles-grid">
                    <article class="article-card" onclick="showArticle('article1')">
                        <h3>5 Cara Mengembangkan Usaha di Desa</h3>
                        <p>Pelajari strategi praktis untuk mengembangkan UMKM di daerah pedesaan dengan memanfaatkan potensi lokal dan teknologi digital.</p>
                        <a>Baca Selengkapnya </a>
                    </article>
                    <article class="article-card" onclick="showArticle('article2')">
                        <h3>Manfaat Digitalisasi untuk UMKM</h3>
                        <p>Bagaimana teknologi digital dapat membantu UMKM menjangkau pasar yang lebih luas dan meningkatkan penjualan.</p>
                        <a>Baca Selengkapnya </a>
                    </article>
                    <article class="article-card" onclick="showArticle('article3')">
                        <h3>Tips Pemasaran Produk Lokal</h3>
                        <p>Strategi efektif untuk memasarkan produk lokal agar dikenal lebih luas dan bersaing di pasar modern.</p>
                        <a>Baca Selengkapnya </a>
                    </article>
                </div>
            </div>
        </section>

        <!-- Other sections (jasa, mebel, kesenian, warung, otomotif, peternakan, vendor) -->
        <!-- Content remains the same as previous implementation -->

        <section id="jasa" class="section">
            <h2> Jasa Sewa & Event</h2>
            <div class="toko-grid">
                <div class="toko-card" data-kategori="jasa sewa tenda sound" data-nama="Sewa Tenda & Sound Jaya" data-rating="4.2" data-price="500000">
                    <div class="promo-badge"> PROMO 10%</div>
                    <div class="offer-tag"> Spesial Bulan Ini</div>
                    <img src="https://images.unsplash.com/photo-1576435728678-68d0fbf94e91?w=400&h=250&fit=crop&auto=format" alt="Sewa Tenda & Sound">
                    <div class="toko-info">
                        <h3>Sewa Tenda & Sound Jaya</h3>
                        <p> Tenda berbagai ukuran + sound system lengkap</p>
                        <div class="rating-stars">
                            <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span>
                            <span class="rating-value">4.2/5.0</span>
                        </div>
                        <p> Jl. Raya Bulurejo No. 12</p>
                        <div class="social-share">
                            <button onclick="shareProduct('Sewa Tenda & Sound Jaya')"> Bagikan</button>
                        </div>
                        <div class="toko-actions">
                            <button class="btn-cart" onclick="addToCart('Sewa Tenda & Sound Jaya', '500000')">Tambah ke Keranjang</button>
                            <button class="btn-detail" onclick="showTokoDetail('tenda')">Lihat Detail</button>
                            <button class="btn-wa" onclick="smartWA('tenda', 'Sewa Tenda & Sound')">Chat WA</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Vendor Dashboard -->
        <section id="vendor" class="section">
            <div class="vendor-dashboard">
                <h2> Dashboard UMKM</h2>
                <div class="dashboard-stats">
                    <div class="dashboard-card">
                        <h3>Total Penjualan</h3>
                        <span class="stat">Rp 12.450.000</span>
                    </div>
                    <div class="dashboard-card">
                        <h3>Pesanan Bulan Ini</h3>
                        <span class="stat">48</span>
                    </div>
                    <div class="dashboard-card">
                        <h3>Rating Rata-rata</h3>
                        <span class="stat">4.7 </span>
                    </div>
                    <div class="dashboard-card">
                        <h3>Pelanggan Baru</h3>
                        <span class="stat">12</span>
                    </div>
                </div>
                <div class="sales-chart">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
        </section>

    </main>

    <!-- === LIVE CHAT === -->
    <div class="live-chat">
        <div class="chat-button" onclick="toggleChat()">
             Butuh Bantuan?
        </div>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <span>Live Chat Support</span>
                <span onclick="toggleChat()" style="cursor: pointer;"></span>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">Halo! Ada yang bisa kami bantu?</div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Ketik pesan...">
                <button onclick="sendChatMessage()">Kirim</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2024 Portal UMKM Digital Bulurejo Monggol. Semua hak dilindungi.</p>
            <p> Email: umkm.bulurejo@gmail.com |  Telp: (021) 555-6789</p>
        </div>
    </footer>

    <!-- === MODAL DETAIL TOKO === -->
    <div id="tokoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody">
                <!-- Konten modal akan diisi oleh JavaScript -->
            </div>
        </div>
    </div>

    <!-- === WHATSAPP BUSINESS MODAL === -->
    <div id="whatsappModal" class="modal whatsapp-custom-modal">
        <div class="modal-content whatsapp-custom-content">
            <span class="close" onclick="closeWhatsappModal()">&times;</span>
            <h2>Kirim Pesan WhatsApp</h2>
            <div class="custom-message-form">
                <textarea id="customMessage" placeholder="Ketik pesan Anda di sini..." rows="6">Halo! Saya tertarik dengan produk/layanan Anda. Bisa beri informasi lebih detail?</textarea>
                <div class="message-preview">
                    <h4>Preview Pesan:</h4>
                    <p id="messagePreview">Halo! Saya tertarik dengan produk/layanan Anda. Bisa beri informasi lebih detail?</p>
                </div>
                <div class="template-actions">
                    <button class="btn-whatsapp" onclick="sendCustomWhatsapp()">Kirim WhatsApp</button>
                    <button class="btn-customize" onclick="closeWhatsappModal()">Batal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- === BOOKING MODAL === -->
    <div id="bookingModal" class="modal">
        <div class="modal-content booking-modal-content">
            <span class="close" onclick="closeBookingModal()">&times;</span>
            <h2 id="bookingTitle">Pesan Layanan</h2>
            <div id="bookingContent">
                <!-- Booking form will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- === LIGHTBOX MODAL === -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            <button class="lightbox-nav lightbox-prev" onclick="prevImage()">&#10094;</button>
            <img id="lightboxImage" class="lightbox-image" src="" alt="">
            <button class="lightbox-nav lightbox-next" onclick="nextImage()">&#10095;</button>
            <div id="lightboxCounter" class="lightbox-counter">1 / 1</div>
            <div id="lightboxThumbnails" class="lightbox-thumbnails">
                <!-- Thumbnails will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- === AUTH MODAL === -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-content">
            <span class="close" onclick="closeAuthModal()" style="float: right; font-size: 28px; cursor: pointer;">&times;</span>
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Daftar</button>
            </div>
            <div id="loginForm" class="auth-form">
                <input type="email" placeholder="Email" id="loginEmail">
                <input type="password" placeholder="Password" id="loginPassword">
                <button onclick="loginUser()">Login</button>
            </div>
            <div id="registerForm" class="auth-form" style="display: none;">
                <input type="text" placeholder="Nama UMKM" id="regName">
                <input type="email" placeholder="Email" id="regEmail">
                <input type="password" placeholder="Password" id="regPassword">
                <input type="text" placeholder="Kategori (Jasa/Kayu/Kesenian)" id="regCategory">
                <button onclick="registerUser()">Daftar</button>
            </div>
        </div>
    </div>

    <!-- === CART MODAL === -->
    <div id="cartModal" class="cart-modal">
        <div class="cart-modal-content">
            <span class="close" onclick="closeCartModal()" style="float: right; font-size: 28px; cursor: pointer;">&times;</span>
            <h2> Keranjang Belanja</h2>
            <div id="cartItems"></div>
            <div class="cart-total" id="cartTotal">Total: Rp 0</div>
            <div class="toko-actions" style="margin-top: 1rem;">
                <button class="btn-detail" onclick="closeCartModal()">Lanjut Belanja</button>
                <button class="btn-wa" onclick="proceedToCheckout()">Checkout</button>
            </div>
            <div id="checkoutForm" class="checkout-form">
                <h3>Detail Pengiriman</h3>
                <input type="text" placeholder="Nama Lengkap" id="checkoutName">
                <input type="text" placeholder="Alamat Lengkap" id="checkoutAddress">
                <input type="tel" placeholder="Nomor HP" id="checkoutPhone">
                <select id="checkoutPayment">
                    <option value="">Pilih Metode Pembayaran</option>
                    <option value="cod">Bayar di Tempat (COD)</option>
                    <option value="transfer">Transfer Bank</option>
                    <option value="ewallet">E-Wallet</option>
                </select>

                <!-- Payment Gateway Section -->
                <div id="paymentGatewaySection" style="display: none;">
                    <div class="payment-gateways">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Pilih Metode Pembayaran</h3>
                        <div class="payment-gateway-grid">
                            <div class="payment-gateway-card" onclick="selectPaymentGateway('midtrans')" id="midtransCard">
                                <div class="payment-gateway-icon"></div>
                                <div class="payment-gateway-name">Midtrans</div>
                                <div class="payment-gateway-desc">Pembayaran online terpercaya</div>
                                <div class="payment-gateway-features">
                                    <ul>
                                        <li>Transfer Bank</li>
                                        <li>E-Wallet (GoPay, OVO, Dana)</li>
                                        <li>Kartu Kredit/Debit</li>
                                        <li>QR Code</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="payment-gateway-card" onclick="selectPaymentGateway('stripe')" id="stripeCard">
                                <div class="payment-gateway-icon"></div>
                                <div class="payment-gateway-name">Stripe</div>
                                <div class="payment-gateway-desc">Internasional payment gateway</div>
                                <div class="payment-gateway-features">
                                    <ul>
                                        <li>Kartu Kredit/Debit</li>
                                        <li>Apple Pay & Google Pay</li>
                                        <li>Transfer Bank</li>
                                        <li>Secure checkout</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="payment-gateway-card" onclick="selectPaymentGateway('cod')" id="codCard">
                                <div class="payment-gateway-icon"></div>
                                <div class="payment-gateway-name">Bayar di Tempat</div>
                                <div class="payment-gateway-desc">COD - Cash on Delivery</div>
                                <div class="payment-gateway-features">
                                    <ul>
                                        <li>Bayar saat barang diterima</li>
                                        <li>Tanpa biaya admin</li>
                                        <li>Praktis & aman</li>
                                        <li>Gratis ongkir</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="payment-summary" id="paymentSummary" style="display: none;">
                            <h3>Ringkasan Pembayaran</h3>
                            <div class="payment-summary-item">
                                <span>Total Belanja:</span>
                                <span id="summarySubtotal">Rp 0</span>
                            </div>
                            <div class="payment-summary-item">
                                <span>Biaya Admin:</span>
                                <span id="summaryAdminFee">Rp 0</span>
                            </div>
                            <div class="payment-summary-item">
                                <span>Ongkos Kirim:</span>
                                <span id="summaryShipping">Rp 0</span>
                            </div>
                            <div class="payment-summary-item">
                                <span><strong>Total Pembayaran:</strong></span>
                                <span id="summaryTotal"><strong>Rp 0</strong></span>
                            </div>
                        </div>

                        <button class="btn-payment" onclick="processPayment()" id="paymentButton" disabled>
                            Bayar Sekarang
                        </button>
                    </div>
                </div>

                <div class="payment-status" id="paymentStatus">
                    <div class="payment-status-icon" id="paymentStatusIcon"></div>
                    <h3 id="paymentStatusTitle">Memproses Pembayaran...</h3>
                    <p id="paymentStatusMessage">Mohon tunggu sebentar, pembayaran sedang diproses.</p>
                </div>

                <button onclick="completeOrder()" style="background: var(--primary-color); color: white; border: none; padding: 12px; border-radius: 6px; width: 100%; margin-top: 10px;">Selesaikan Pesanan</button>
            </div>
        </div>
    </div>

    <script>
        // === BULUREJO MONGGOl DATA INTEGRATION ===
        
        // Data UMKM dari website Bulurejo Monggol
        const bulurejoData = {
            profilDesa: {
                nama: "Bulurejo Monggol",
                lokasi: "Kecamatan Saptosari, Kabupaten Gunungkidul, D.I Yogyakarta",
                deskripsi: "Desa Bulurejo Monggol merupakan desa yang terletak di Kecamatan Saptosari Kabupaten Gunungkidul dengan potensi UMKM yang beragam.",
                visi: "Mewujudkan Desa Bulurejo Monggol yang mandiri, sejahtera, dan berbudaya",
                misi: [
                    "Mengembangkan potensi ekonomi lokal",
                    "Meningkatkan kualitas sumber daya manusia",
                    "Melestarikan budaya dan kearifan lokal"
                ]
            },
            
            umkmData: {
                jasaSewa: [
                    {
                        id: 1,
                        nama: "Sewa Tenda & Sound System",
                        pemilik: "Bapak Sutrisno",
                        deskripsi: "Menyediakan jasa sewa tenda berbagai ukuran dan sound system untuk acara pernikahan, khitanan, dan acara lainnya.",
                        harga: "Rp 500.000 - 1.500.000",
                        kontak: "0857-1234-5678",
                        rating: 4.5,
                        gambar: [
                            "https://images.unsplash.com/photo-1576435728678-68d0fbf94e91?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1464366400600-7168b8af9bc3?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.512, 110.789],
                        alamat: "Jl. Raya Bulurejo No. 12, Bulurejo Monggol",
                        kategori: "jasa"
                    }
                ],

                mebelKayu: [
                    {
                        id: 1,
                        nama: "Pengrajin Kayu Jati",
                        pemilik: "Bapak Joko",
                        deskripsi: "Menyediakan kayu jati berkualitas dan produk mebel custom sesuai pesanan.",
                        produk: ["Kursi", "Meja", "Lemari", "Pintu"],
                        harga: "Rp 200.000 - 5.000.000",
                        kontak: "0812-3456-7890",
                        rating: 4.8,
                        gambar: [
                            "https://images.unsplash.com/photo-1567495243894-6586e5363b38?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.508, 110.785],
                        alamat: "Jl. Kayu Jati No. 8, Bulurejo Monggol",
                        kategori: "mebel"
                    }
                ],

                kesenian: [
                    {
                        id: 1,
                        nama: "Grupp Reog Singo Barong",
                        pemilik: "Bapak Suroto",
                        deskripsi: "Menampilkan kesenian Reog khas Jawa dengan penari profesional dan kostum yang megah.",
                        jenis: ["Reog Ponorogo", "Tari Tradisional"],
                        harga: "Rp 1.000.000 - 3.000.000",
                        kontak: "0856-7890-1234",
                        rating: 4.9,
                        gambar: [
                            "https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1464366400600-7168b8af9bc3?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.515, 110.792],
                        alamat: "Jl. Budaya No. 15, Bulurejo Monggol",
                        kategori: "kesenian"
                    }
                ],

                kuliner: [
                    {
                        id: 1,
                        nama: "Warung Makan Sederhana",
                        pemilik: "Ibu Siti",
                        deskripsi: "Menyajikan masakan rumahan khas Jawa dengan cita rasa autentik.",
                        menu: ["Nasi Liwet", "Sayur Lodeh", "Ayam Goreng", "Sambal Terasi"],
                        harga: "Rp 10.000 - 25.000",
                        kontak: "0813-4567-8901",
                        rating: 4.7,
                        gambar: [
                            "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.510, 110.788],
                        alamat: "Jl. Makan No. 5, Bulurejo Monggol",
                        kategori: "kuliner"
                    },
                    {
                        id: 2,
                        nama: "Angkringan Ngelosor",
                        pemilik: "Bapak Riyanto",
                        deskripsi: "Tempat nongkrong khas Jogja dengan berbagai menu angkringan yang lengkap.",
                        menu: ["Sate Kere", "Nasi Kucing", "Teh Hangat", "Kopi Jos"],
                        harga: "Rp 5.000 - 15.000",
                        kontak: "0858-9012-3456",
                        rating: 4.6,
                        gambar: [
                            "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.507, 110.786],
                        alamat: "Jl. Malioboro No. 22, Bulurejo Monggol",
                        kategori: "kuliner"
                    }
                ],

                otomotif: [
                    {
                        id: 1,
                        nama: "Bengkel Sumber Rejeki",
                        pemilik: "Bapak Ahmad",
                        deskripsi: "Melayani service dan perbaikan kendaraan bermotor dengan teknisi berpengalaman.",
                        layanan: ["Service Rutin", "Ganti Oli", "Perbaikan Mesin", "Tambal Ban"],
                        harga: "Rp 50.000 - 500.000",
                        kontak: "0811-2233-4455",
                        rating: 4.4,
                        gambar: [
                            "https://images.unsplash.com/photo-1553440569-bcc63803a83d?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1625047509248-ec889cbff17f?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.513, 110.791],
                        alamat: "Jl. Otomotif No. 18, Bulurejo Monggol",
                        kategori: "otomotif"
                    }
                ],

                peternakan: [
                    {
                        id: 1,
                        nama: "Peternakan Ayam Kampung",
                        pemilik: "Bapak Warsito",
                        deskripsi: "Menyediakan ayam kampung segar dan telur ayam kampung berkualitas.",
                        produk: ["Ayam Kampung", "Telur Ayam Kampung"],
                        harga: "Rp 35.000 - 75.000/kg",
                        kontak: "0857-3344-5566",
                        rating: 4.5,
                        gambar: [
                            "https://images.unsplash.com/photo-1589923188651-268a35c0febb?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1548550023-2bdb3c5beed7?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1452570053594-1b985d6ea890?w=400&h=250&fit=crop",
                            "https://images.unsplash.com/photo-1574943320219-553eb213f72d?w=400&h=250&fit=crop"
                        ],
                        koordinat: [-7.509, 110.787],
                        alamat: "Jl. Peternakan No. 9, Bulurejo Monggol",
                        kategori: "peternakan"
                    }
                ]
            },
            
            eventData: [
                {
                    id: 1,
                    nama: "Pameran UMKM Desa",
                    tanggal: "15 Desember 2024",
                    lokasi: "Balai Desa Bulurejo",
                    deskripsi: "Pameran produk dan jasa UMKM desa Bulurejo Monggol"
                },
                {
                    id: 2,
                    nama: "Pelatihan Digital Marketing",
                    tanggal: "20 Desember 2024",
                    lokasi: "Aula Kantor Desa",
                    deskripsi: "Pelatihan pemasaran digital untuk UMKM desa"
                },
                {
                    id: 3,
                    nama: "Festival Kuliner Tradisional",
                    tanggal: "25 Desember 2024",
                    lokasi: "Lapangan Desa Bulurejo",
                    deskripsi: "Festival kuliner khas Jawa dan makanan tradisional"
                }
            ],
            
            beritaData: [
                {
                    id: 1,
                    judul: "Pengembangan UMKM Desa Bulurejo",
                    tanggal: "1 Desember 2024",
                    ringkasan: "Program pengembangan UMKM desa melalui pelatihan dan pendampingan",
                    gambar: "https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=250&fit=crop"
                },
                {
                    id: 2,
                    judul: "Festival Budaya Jawa 2024",
                    tanggal: "10 November 2024",
                    ringkasan: "Penyelenggaraan festival budaya untuk melestarikan kesenian tradisional",
                    gambar: "https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=400&h=250&fit=crop"
                }
            ]
        };

        // === MOBILE MENU FUNCTIONALITY ===
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            const menuOverlay = document.getElementById('menuOverlay');
            
            navMenu.classList.toggle('active');
            menuToggle.classList.toggle('active');
            menuOverlay.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
        }

        // Close mobile menu when clicking on a link
        function closeMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            const menuOverlay = document.getElementById('menuOverlay');
            
            navMenu.classList.remove('active');
            menuToggle.classList.remove('active');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close menu when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.getElementById('menuToggle');
            const menuOverlay = document.getElementById('menuOverlay');
            
            if (window.innerWidth <= 768) {
                if (!navMenu.contains(event.target) && !menuToggle.contains(event.target) && navMenu.classList.contains('active')) {
                    closeMobileMenu();
                }
            }
        });

        // Close menu on escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeMobileMenu();
            }
        });

        // Update navigation for mobile
        function updateNavigationForMobile() {
            const navMenu = document.getElementById('navMenu');
            if (window.innerWidth <= 768) {
                // Mobile view - ensure menu is hidden by default
                navMenu.classList.remove('active');
                document.getElementById('menuToggle').classList.remove('active');
                document.getElementById('menuOverlay').classList.remove('active');
                document.body.style.overflow = '';
            } else {
                // Desktop view - ensure menu is visible
                navMenu.classList.add('active');
            }
        }

        // Listen for window resize
        window.addEventListener('resize', updateNavigationForMobile);

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigationForMobile();

            // Check dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                document.querySelector('.dark-mode-toggle').innerHTML = ' Light';
            }

            // Initialize other features
            renderCalendar();
            initDashboardChart();
            updateLiveStats();
            loadUMKMData();
            updateUserUI();
            updateCartCount();

            // Update live stats every 30 seconds
            setInterval(updateLiveStats, 30000);

            // Request notification permission
            setTimeout(requestNotificationPermission, 2000);
        });

        // Load UMKM data from Bulurejo Monggol
        function loadUMKMData() {
            // Update hero section with real data
            document.querySelector('.hero-content h1').textContent = `Selamat Datang di ${bulurejoData.profilDesa.nama}`;
            document.querySelector('.hero-content p').textContent = bulurejoData.profilDesa.deskripsi;
            
            // Update UMKM count in stats
            const totalUMKM = Object.values(bulurejoData.umkmData).reduce((total, category) => total + category.length, 0);
            document.querySelector('.stat-card:nth-child(3) .stat-number').textContent = `${totalUMKM}+`;
        }

        // Modified showSection function to close mobile menu
        function showSection(sectionId) {
            document.getElementById('loadingSpinner').classList.add('active');
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and activate the clicked button
            const activeButton = Array.from(document.querySelectorAll('.nav-btn')).find(btn => 
                btn.getAttribute('onclick')?.includes(sectionId)
            );
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            setTimeout(() => {
                document.getElementById(sectionId).classList.add('active');
                document.getElementById('loadingSpinner').classList.remove('active');
                
                // Close mobile menu after navigation
                if (window.innerWidth <= 768) {
                    closeMobileMenu();
                }
            }, 500);
        }

        // === BULUREJO-SPECIFIC FUNCTIONS ===
        
        // Global variables for lightbox
        let currentImages = [];
        let currentImageIndex = 0;

        // Function to display UMKM details
        function showUMKMDetail(category, id) {
            const umkm = bulurejoData.umkmData[category].find(item => item.id === id);
            if (!umkm) return;

            // Ensure gambar is an array
            const images = Array.isArray(umkm.gambar) ? umkm.gambar : [umkm.gambar];

            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <h2>${umkm.nama}</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1rem;">
                    <div>
                        <div class="gallery-section">
                            <div class="gallery-grid">
                                ${images.map((img, index) => `
                                    <img src="${img}" alt="${umkm.nama} - Gambar ${index + 1}"
                                         onclick="openLightbox('${category}', ${id}, ${index})"
                                         style="cursor: pointer;">
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    <div>
                        <p><strong>Pemilik:</strong> ${umkm.pemilik}</p>
                        <p><strong>Deskripsi:</strong> ${umkm.deskripsi}</p>
                        <p><strong>Harga:</strong> ${umkm.harga}</p>
                        <p><strong>Kontak:</strong> ${umkm.kontak}</p>
                        <div class="rating-stars">
                            ${''.repeat(Math.floor(umkm.rating))}${umkm.rating % 1 >= 0.5 ? '' : ''}${''.repeat(5 - Math.ceil(umkm.rating))}
                            <span class="rating-value">${umkm.rating}/5.0</span>
                        </div>
                        ${umkm.produk ? `<p><strong>Produk:</strong> ${umkm.produk.join(', ')}</p>` : ''}
                        ${umkm.menu ? `<p><strong>Menu:</strong> ${umkm.menu.join(', ')}</p>` : ''}
                        ${umkm.layanan ? `<p><strong>Layanan:</strong> ${umkm.layanan.join(', ')}</p>` : ''}
                        ${umkm.jenis ? `<p><strong>Jenis:</strong> ${umkm.jenis.join(', ')}</p>` : ''}
                    </div>
                </div>
                <div class="toko-actions" style="margin-top: 2rem;">
                    <button class="btn-wa" onclick="contactWA('${umkm.kontak}', '${umkm.nama}')">Chat WhatsApp</button>
                    <button class="btn-booking" onclick="openBookingModal('${category}', ${id})" style="background: linear-gradient(135deg, #FF6B6B 0%, #ee5a24 100%); margin-right: 1rem;">Pesan Sekarang</button>
                    <button class="btn-whatsapp" onclick="openWhatsappTemplates('${umkm.kontak}', '${umkm.nama}', '${category}')" style="background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); margin-right: 1rem;">Template WA</button>
                    <button class="btn-detail" onclick="closeModal()">Tutup</button>
                </div>
            `;

            document.getElementById('tokoModal').style.display = 'block';
        }

        // Function to contact via WhatsApp
        function contactWA(phone, businessName) {
            const message = `Halo, saya tertarik dengan produk/jasa ${businessName} dari Portal UMKM Bulurejo Monggol. Bisa info lebih lanjut?`;
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${phone.replace(/-/g, '')}?text=${encodedMessage}`, '_blank');
        }

        // Function to load events from Bulurejo data
        function loadEvents() {
            const eventList = document.querySelector('.event-list');
            eventList.innerHTML = '';
            
            bulurejoData.eventData.forEach(event => {
                const eventItem = document.createElement('div');
                eventItem.className = 'event-item';
                eventItem.innerHTML = `
                    <span class="event-date">${event.tanggal.split(' ')[0]} ${event.tanggal.split(' ')[1]}</span>
                    <span class="event-title">${event.nama}</span>
                `;
                eventList.appendChild(eventItem);
            });
        }

        // Function to load news/articles
        function loadNews() {
            const articlesGrid = document.querySelector('.articles-grid');
            articlesGrid.innerHTML = '';
            
            bulurejoData.beritaData.forEach(article => {
                const articleCard = document.createElement('article');
                articleCard.className = 'article-card';
                articleCard.onclick = () => showArticleDetail(article.id);
                articleCard.innerHTML = `
                    <h3>${article.judul}</h3>
                    <p>${article.ringkasan}</p>
                    <a>Baca Selengkapnya </a>
                `;
                articlesGrid.appendChild(articleCard);
            });
        }

        // Function to show article details
        function showArticleDetail(articleId) {
            const article = bulurejoData.beritaData.find(item => item.id === articleId);
            if (!article) return;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <h2>${article.judul}</h2>
                <p style="color: #666; margin-bottom: 1rem;">${article.tanggal}</p>
                <img src="${article.gambar}" alt="${article.judul}" style="width: 100%; border-radius: 8px; margin-bottom: 1rem;">
                <p>${article.ringkasan}</p>
                <p>Artikel lengkap akan segera tersedia. Untuk informasi lebih lanjut, silakan hubungi admin desa.</p>
                <div class="toko-actions" style="margin-top: 2rem;">
                    <button class="btn-detail" onclick="closeModal()">Tutup</button>
                </div>
            `;
            
            document.getElementById('tokoModal').style.display = 'block';
        }

        // Initialize data loading
        document.addEventListener('DOMContentLoaded', function() {
            loadUMKMData();
            loadEvents();
            loadNews();
            initUMKMMap();
        });

        // Initialize UMKM Map
        function initUMKMMap() {
            const mapElement = document.getElementById('umkmMap');
            if (!mapElement) return;

            // Initialize map centered on Bulurejo Monggol
            const map = L.map('umkmMap').setView([-7.51, 110.788], 14);

            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: ' OpenStreetMap contributors'
            }).addTo(map);

            // Custom icons for different categories
            const iconColors = {
                jasa: '#FF9800',
                mebel: '#8B4513',
                kesenian: '#9C27B0',
                kuliner: '#4CAF50',
                otomotif: '#2196F3',
                peternakan: '#795548'
            };

            // Add markers for each UMKM
            Object.values(bulurejoData.umkmData).forEach(category => {
                category.forEach(umkm => {
                    const icon = L.divIcon({
                        className: 'umkm-marker',
                        html: `<div style="background-color: ${iconColors[umkm.kategori]};
                                              width: 24px;
                                              height: 24px;
                                              border-radius: 50%;
                                              border: 3px solid white;
                                              box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                                              display: flex;
                                              align-items: center;
                                              justify-content: center;
                                              font-size: 12px;
                                              font-weight: bold;
                                              color: white;">${umkm.kategori.charAt(0).toUpperCase()}</div>`,
                        iconSize: [24, 24],
                        iconAnchor: [12, 12]
                    });

                    const marker = L.marker(umkm.koordinat, { icon: icon }).addTo(map);

                    // Create popup content
                    const popupContent = `
                        <div style="max-width: 250px; font-family: Arial, sans-serif;">
                            <img src="${umkm.gambar}" alt="${umkm.nama}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 8px;">
                            <h3 style="margin: 0 0 8px 0; color: #2E7D32; font-size: 16px;">${umkm.nama}</h3>
                            <p style="margin: 0 0 8px 0; font-size: 14px;"><strong>Pemilik:</strong> ${umkm.pemilik}</p>
                            <p style="margin: 0 0 8px 0; font-size: 14px;"><strong>Alamat:</strong> ${umkm.alamat}</p>
                            <p style="margin: 0 0 8px 0; font-size: 14px;"><strong>Kontak:</strong> ${umkm.kontak}</p>
                            <p style="margin: 0 0 8px 0; font-size: 14px;"><strong>Harga:</strong> ${umkm.harga}</p>
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <span style="font-size: 14px; margin-right: 8px;"><strong>Rating:</strong></span>
                                <div style="display: flex;">
                                    ${''.repeat(Math.floor(umkm.rating))}${''.repeat(5 - Math.floor(umkm.rating))}
                                </div>
                                <span style="font-size: 14px; margin-left: 4px;">${umkm.rating}/5.0</span>
                            </div>
                            <p style="margin: 0 0 12px 0; font-size: 13px; color: #666;">${umkm.deskripsi}</p>
                            <div style="display: flex; gap: 8px;">
                                <button onclick="contactWA('${umkm.kontak}', '${umkm.nama}')" style="background: #25D366; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">WhatsApp</button>
                                <button onclick="showUMKMDetail('${umkm.kategori}', ${umkm.id})" style="background: #2196F3; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Detail</button>
                            </div>
                        </div>
                    `;

                    marker.bindPopup(popupContent);
                });
            });

            // Add legend
            const legend = L.control({ position: 'bottomright' });
            legend.onAdd = function(map) {
                const div = L.DomUtil.create('div', 'map-legend');
                div.innerHTML = `
                    <h4>Kategori UMKM</h4>
                    ${Object.entries(iconColors).map(([kategori, color]) => `
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: ${color}"></div>
                            <span>${kategori.charAt(0).toUpperCase() + kategori.slice(1)}</span>
                        </div>
                    `).join('')}
                `;
                return div;
            };
            legend.addTo(map);

            // Add layer control
            const baseLayers = {
                "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'),
                "Satellite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')
            };

            L.control.layers(baseLayers).addTo(map);
        }

        // === EXISTING FUNCTIONS (keep your existing functionality) ===
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const toggleBtn = document.querySelector('.dark-mode-toggle');
            if (document.body.classList.contains('dark-mode')) {
                toggleBtn.innerHTML = ' Light';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                toggleBtn.innerHTML = ' Dark';
                localStorage.setItem('darkMode', 'disabled');
            }
        }

        function toggleNotifications() {
            document.getElementById('notificationsPanel').classList.toggle('active');
        }

        function updateLiveStats() {
            const visitors = Math.floor(Math.random() * 10) + 20;
            const orders = Math.floor(Math.random() * 5) + 5;
            document.getElementById('liveVisitors').textContent = visitors;
            document.getElementById('todayOrders').textContent = orders;
        }

        function renderCalendar() {
            // Your existing calendar rendering code
            const calendarGrid = document.getElementById('calendarGrid');
            const days = ['M', 'S', 'S', 'R', 'K', 'J', 'S'];
            
            // Add day headers
            days.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                dayElement.style.fontWeight = 'bold';
                calendarGrid.appendChild(dayElement);
            });
            
            // Add calendar days (simplified)
            for (let i = 1; i <= 31; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = i;
                
                // Mark today and events
                if (i === new Date().getDate()) {
                    dayElement.classList.add('today');
                }
                if ([15, 20, 25].includes(i)) {
                    dayElement.classList.add('event');
                }
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function initDashboardChart() {
            const ctx = document.getElementById('salesChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
                    datasets: [{
                        label: 'Penjualan (Rp)',
                        data: [8500000, 9200000, 7800000, 10500000, 12450000, 11000000],
                        borderColor: '#2E7D32',
                        backgroundColor: 'rgba(46, 125, 50, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function closeModal() {
            document.getElementById('tokoModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('tokoModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Your other existing functions...
        function searchToko() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            alert(`Pencarian untuk: ${searchTerm}`);
            // Implement your search logic here
        }

        function advancedSearch() {
            alert('Filter diterapkan!');
            // Implement your advanced search logic here
        }

        function shareFacebook() {
            alert('Berbagi ke Facebook');
        }

        function shareWhatsApp() {
            alert('Berbagi ke WhatsApp');
        }

        function shareInstagram() {
            alert('Berbagi ke Instagram');
        }

        function toggleChat() {
            document.getElementById('chatWindow').classList.toggle('active');
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const messages = document.getElementById('chatMessages');
            
            if (input.value.trim()) {
                const userMessage = document.createElement('div');
                userMessage.className = 'message user';
                userMessage.textContent = input.value;
                messages.appendChild(userMessage);
                
                input.value = '';
                messages.scrollTop = messages.scrollHeight;
                
                // Auto reply after 1 second
                setTimeout(() => {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'message bot';
                    botMessage.textContent = 'Terima kasih atas pesannya. Admin akan membalas segera.';
                    messages.appendChild(botMessage);
                    messages.scrollTop = messages.scrollHeight;
                }, 1000);
            }
        }

        function sendToChatbot() {
            const input = document.getElementById('chatbotInput');
            const messages = document.getElementById('chatbotMessages');
            
            if (input.value.trim()) {
                const userMessage = document.createElement('div');
                userMessage.className = 'user-message';
                userMessage.textContent = input.value;
                messages.appendChild(userMessage);
                
                const userText = input.value.toLowerCase();
                input.value = '';
                messages.scrollTop = messages.scrollHeight;
                
                // Simple chatbot responses
                let response = "Maaf, saya tidak mengerti pertanyaan Anda. Coba tanyakan tentang UMKM di Bulurejo Monggol.";
                
                if (userText.includes('tenda') || userText.includes('sewa')) {
                    response = "Untuk jasa sewa tenda dan sound system, silakan hubungi Bapak Sutrisno di 0857-1234-5678. Harga mulai Rp 500.000.";
                } else if (userText.includes('kayu') || userText.includes('mebel')) {
                    response = "Pengrajin kayu jati tersedia dengan produk kursi, meja, lemari, dan pintu custom. Hubungi Bapak Joko di 0812-3456-7890.";
                } else if (userText.includes('reog') || userText.includes('kesenian')) {
                    response = "Grupp Reog Singo Barong siap menghibur acara Anda. Hubungi Bapak Suroto di 0856-7890-1234. Harga mulai Rp 1.000.000.";
                } else if (userText.includes('makan') || userText.includes('kuliner')) {
                    response = "Warung makan dan angkringan tersedia di Bulurejo. Coba Warung Ibu Siti atau Angkringan Ngelosor Bapak Riyanto.";
                } else if (userText.includes('bengkel') || userText.includes('otomotif')) {
                    response = "Bengkel Sumber Rejeki melayani service kendaraan. Hubungi Bapak Ahmad di 0811-2233-4455.";
                } else if (userText.includes('ayam') || userText.includes('peternakan')) {
                    response = "Peternakan ayam kampung menyediakan ayam dan telur segar. Hubungi Bapak Warsito di 0857-3344-5566.";
                } else if (userText.includes('event') || userText.includes('acara')) {
                    response = "Event mendatang: Pameran UMKM (15 Des), Pelatihan Digital Marketing (20 Des), Festival Kuliner (25 Des).";
                }
                
                setTimeout(() => {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'bot-message';
                    botMessage.textContent = response;
                    messages.appendChild(botMessage);
                    messages.scrollTop = messages.scrollHeight;
                }, 1000);
            }
        }

        function requestNotificationPermission() {
            if ("Notification" in window && Notification.permission === "default") {
                Notification.requestPermission();
            }
        }

        function clearNotifications() {
            document.querySelectorAll('.notification-item').forEach(item => {
                item.remove();
            });
            document.querySelector('.notification-count').textContent = '0';
        }

        function changeLanguage(lang) {
            alert(`Bahasa diubah ke: ${lang}`);
            // Implement language switching logic here
        }

        function prevMonth() {
            alert('Bulan sebelumnya');
            // Implement calendar navigation
        }

        function nextMonth() {
            alert('Bulan berikutnya');
            // Implement calendar navigation
        }

        function showArticle(articleId) {
            alert(`Membuka artikel: ${articleId}`);
            // Implement article display logic
        }

        function showTokoDetail(tokoId) {
            alert(`Detail toko: ${tokoId}`);
            // Implement store detail display
        }

        function smartWA(tokoId, tokoName) {
            alert(`Membuka WhatsApp untuk: ${tokoName}`);
            // Implement WhatsApp integration
        }

        function shareProduct(productName) {
            alert(`Membagikan produk: ${productName}`);
            // Implement product sharing
        }

        // === AUTH FUNCTIONS ===
        function openAuthModal() {
            document.getElementById('authModal').style.display = 'block';
        }

        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
        }

        function switchAuthTab(tab) {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const tabs = document.querySelectorAll('.auth-tab');

            tabs.forEach(t => t.classList.remove('active'));
            if (tab === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                tabs[0].classList.add('active');
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                tabs[1].classList.add('active');
            }
        }

        function registerUser() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const category = document.getElementById('regCategory').value;

            if (!name || !email || !password || !category) {
                alert('Semua field harus diisi!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('umkmUsers') || '[]');
            if (users.find(u => u.email === email)) {
                alert('Email sudah terdaftar!');
                return;
            }

            users.push({ name, email, password, category, points: 0 });
            localStorage.setItem('umkmUsers', JSON.stringify(users));
            alert('Pendaftaran berhasil! Silakan login.');
            switchAuthTab('login');
        }

        function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const users = JSON.parse(localStorage.getItem('umkmUsers') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                alert('Login berhasil!');
                closeAuthModal();
                updateUserUI();
            } else {
                alert('Email atau password salah!');
            }
        }

        function updateUserUI() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (user) {
                document.querySelector('button[onclick="openAuthModal()"]').innerHTML = ` ${user.name}`;
                document.querySelector('button[onclick="openAuthModal()"]').onclick = () => showSection('vendor');
            }
        }

        // === CART FUNCTIONS ===
        function addToCart(productName, price) {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(item => item.name === productName);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name: productName, price: parseInt(price.replace(/[^\d]/g, '')), quantity: 1 });
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${productName} ditambahkan ke keranjang!`);
            updateCartCount();
        }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartButton = document.querySelector('button[onclick="openCartModal()"]');
            if (cartButton) {
                cartButton.innerHTML = ` Keranjang${totalItems > 0 ? ` (${totalItems})` : ''}`;
            }
        }

        function openCartModal() {
            document.getElementById('cartModal').style.display = 'block';
            displayCartItems();
        }

        function closeCartModal() {
            document.getElementById('cartModal').style.display = 'none';
            document.getElementById('checkoutForm').classList.remove('active');
        }

        function displayCartItems() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const cartItemsDiv = document.getElementById('cartItems');
            const cartTotalDiv = document.getElementById('cartTotal');

            if (cart.length === 0) {
                cartItemsDiv.innerHTML = '<p>Keranjang kosong</p>';
                cartTotalDiv.textContent = 'Total: Rp 0';
                return;
            }

            let total = 0;
            cartItemsDiv.innerHTML = cart.map(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                return `
                    <div class="cart-item">
                        <div>
                            <strong>${item.name}</strong><br>
                            Rp ${item.price.toLocaleString()} x ${item.quantity}
                        </div>
                        <div>
                            Rp ${itemTotal.toLocaleString()}
                            <button onclick="removeFromCart('${item.name}')" style="margin-left: 10px; background: #dc3545; color: white; border: none; border-radius: 4px; padding: 4px 8px;">Hapus</button>
                        </div>
                    </div>
                `;
            }).join('');

            cartTotalDiv.textContent = `Total: Rp ${total.toLocaleString()}`;
        }

        function removeFromCart(productName) {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const updatedCart = cart.filter(item => item.name !== productName);
            localStorage.setItem('cart', JSON.stringify(updatedCart));
            displayCartItems();
        }

        function proceedToCheckout() {
            document.getElementById('checkoutForm').classList.add('active');
        }

        function completeOrder() {
            const name = document.getElementById('checkoutName').value;
            const address = document.getElementById('checkoutAddress').value;
            const phone = document.getElementById('checkoutPhone').value;
            const payment = document.getElementById('checkoutPayment').value;

            if (!name || !address || !phone || !payment) {
                alert('Semua field harus diisi!');
                return;
            }

            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            if (cart.length === 0) {
                alert('Keranjang kosong!');
                return;
            }

            // Simulate order completion
            alert('Pesanan berhasil! Kami akan menghubungi Anda segera.');
            localStorage.removeItem('cart');
            closeCartModal();
            updateCartCount();
        }

        // === LIGHTBOX FUNCTIONS ===
        function openLightbox(category, id, startIndex = 0) {
            const umkm = bulurejoData.umkmData[category].find(item => item.id === id);
            if (!umkm) return;

            currentImages = Array.isArray(umkm.gambar) ? umkm.gambar : [umkm.gambar];
            currentImageIndex = startIndex;

            updateLightbox();
            document.getElementById('lightbox').classList.add('active');

            // Prevent body scroll when lightbox is open
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
        }

        function updateLightbox() {
            const lightboxImage = document.getElementById('lightboxImage');
            const lightboxCounter = document.getElementById('lightboxCounter');
            const lightboxThumbnails = document.getElementById('lightboxThumbnails');

            // Update main image
            lightboxImage.src = currentImages[currentImageIndex];
            lightboxImage.alt = `Gambar ${currentImageIndex + 1}`;

            // Update counter
            lightboxCounter.textContent = `${currentImageIndex + 1} / ${currentImages.length}`;

            // Update thumbnails
            lightboxThumbnails.innerHTML = currentImages.map((img, index) => `
                <img src="${img}" class="lightbox-thumbnail ${index === currentImageIndex ? 'active' : ''}"
                     onclick="goToImage(${index})" alt="Thumbnail ${index + 1}">
            `).join('');
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % currentImages.length;
            updateLightbox();
        }

        function prevImage() {
            currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
            updateLightbox();
        }

        function goToImage(index) {
            currentImageIndex = index;
            updateLightbox();
        }

        // Keyboard navigation for lightbox
        document.addEventListener('keydown', function(event) {
            if (!document.getElementById('lightbox').classList.contains('active')) return;

            switch(event.key) {
                case 'ArrowRight':
                    nextImage();
                    break;
                case 'ArrowLeft':
                    prevImage();
                    break;
                case 'Escape':
                    closeLightbox();
                    break;
            }
        });

        // Close lightbox when clicking outside the image
        document.getElementById('lightbox').addEventListener('click', function(event) {
            if (event.target === this) {
                closeLightbox();
            }
        });

        // === BOOKING SYSTEM FUNCTIONS ===
        let currentBookingUMKM = null;
        let selectedDate = null;
        let selectedTime = null;

        function openBookingModal(category, id) {
            const umkm = bulurejoData.umkmData[category].find(item => item.id === id);
            if (!umkm) return;

            currentBookingUMKM = { category, id, ...umkm };
            selectedDate = null;
            selectedTime = null;

            const bookingContent = document.getElementById('bookingContent');
            bookingContent.innerHTML = `
                <div class="booking-section">
                    <h3 style="margin-bottom: 1rem; text-align: center;">Pesan ${umkm.nama}</h3>

                    <div class="booking-form">
                        <div class="booking-form-group">
                            <label for="bookingName">Nama Lengkap</label>
                            <input type="text" id="bookingName" placeholder="Masukkan nama lengkap" required>
                        </div>

                        <div class="booking-form-group">
                            <label for="bookingPhone">Nomor Telepon</label>
                            <input type="tel" id="bookingPhone" placeholder="0812-3456-7890" required>
                        </div>

                        <div class="booking-form-group">
                            <label for="bookingEmail">Email (Opsional)</label>
                            <input type="email" id="bookingEmail" placeholder="email@example.com">
                        </div>

                        <div class="booking-form-group">
                            <label for="bookingService">Jenis Layanan</label>
                            <select id="bookingService" required>
                                <option value="">Pilih layanan...</option>
                                ${getServiceOptions(category, umkm)}
                            </select>
                        </div>

                        <div class="booking-form-group" style="grid-column: span 2;">
                            <label for="bookingNotes">Catatan Tambahan</label>
                            <textarea id="bookingNotes" rows="3" placeholder="Jelaskan kebutuhan spesifik Anda..."></textarea>
                        </div>
                    </div>

                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button class="calendar-nav" onclick="prevMonth()">&#10094;</button>
                            <div class="calendar-title" id="calendarTitle">Januari 2024</div>
                            <button class="calendar-nav" onclick="nextMonth()">&#10095;</button>
                        </div>

                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Calendar days will be populated by JavaScript -->
                        </div>

                        <div class="time-slots" id="timeSlots" style="display: none;">
                            <!-- Time slots will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="booking-summary" id="bookingSummary" style="display: none;">
                        <h3>Ringkasan Pemesanan</h3>
                        <div class="summary-item">
                            <span>Layanan:</span>
                            <span id="summaryService">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Tanggal:</span>
                            <span id="summaryDate">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Waktu:</span>
                            <span id="summaryTime">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Biaya:</span>
                            <span id="summaryPrice">-</span>
                        </div>
                    </div>

                    <button class="btn-booking" id="bookingSubmitBtn" onclick="submitBooking()" disabled>
                        Konfirmasi Pemesanan
                    </button>
                </div>
            `;

            document.getElementById('bookingTitle').textContent = `Pesan ${umkm.nama}`;
            document.getElementById('bookingModal').style.display = 'block';

            // Initialize calendar
            initializeCalendar();
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').style.display = 'none';
            currentBookingUMKM = null;
            selectedDate = null;
            selectedTime = null;
        }

        function getServiceOptions(category, umkm) {
            const services = [];

            if (category === 'jasaSewa') {
                services.push(
                    '<option value="sewa-tenda">Sewa Tenda</option>',
                    '<option value="sewa-sound">Sewa Sound System</option>',
                    '<option value="sewa-komplit">Paket Komplit</option>'
                );
            } else if (category === 'mebelKayu') {
                if (umkm.produk) {
                    umkm.produk.forEach(produk => {
                        services.push(`<option value="${produk.toLowerCase().replace(' ', '-')}">${produk}</option>`);
                    });
                }
            } else if (category === 'kesenian') {
                if (umkm.jenis) {
                    umkm.jenis.forEach(jenis => {
                        services.push(`<option value="${jenis.toLowerCase().replace(' ', '-')}">${jenis}</option>`);
                    });
                }
            } else if (category === 'kuliner') {
                if (umkm.menu) {
                    umkm.menu.forEach(menu => {
                        services.push(`<option value="${menu.toLowerCase().replace(' ', '-')}">${menu}</option>`);
                    });
                }
            } else if (category === 'otomotif') {
                if (umkm.layanan) {
                    umkm.layanan.forEach(layanan => {
                        services.push(`<option value="${layanan.toLowerCase().replace(' ', '-')}">${layanan}</option>`);
                    });
                }
            } else if (category === 'peternakan') {
                if (umkm.produk) {
                    umkm.produk.forEach(produk => {
                        services.push(`<option value="${produk.toLowerCase().replace(' ', '-')}">${produk}</option>`);
                    });
                }
            }

            return services.length > 0 ? services.join('') : '<option value="konsultasi">Konsultasi</option>';
        }

        function initializeCalendar() {
            const now = new Date();
            let currentMonth = now.getMonth();
            let currentYear = now.getFullYear();

            function renderCalendar(month, year) {
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                const calendarGrid = document.getElementById('calendarGrid');
                const calendarTitle = document.getElementById('calendarTitle');

                calendarTitle.textContent = `${getMonthName(month)} ${year}`;

                let html = '';

                // Day headers
                const days = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
                days.forEach(day => {
                    html += `<div class="calendar-day-header">${day}</div>`;
                });

                // Calendar days
                const endDate = new Date(lastDay);
                endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()));

                let currentDate = new Date(startDate);
                while (currentDate <= endDate) {
                    const isCurrentMonth = currentDate.getMonth() === month;
                    const isToday = currentDate.toDateString() === now.toDateString();
                    const isPast = currentDate < now && !isToday;
                    const isSelected = selectedDate && currentDate.toDateString() === selectedDate.toDateString();

                    const classes = [
                        'calendar-day',
                        isCurrentMonth ? '' : 'disabled',
                        isToday ? 'today' : '',
                        isSelected ? 'selected' : '',
                        isPast ? 'disabled' : ''
                    ].filter(cls => cls).join(' ');

                    html += `<div class="${classes}" onclick="selectDate(${currentDate.getTime()})">${currentDate.getDate()}</div>`;
                    currentDate.setDate(currentDate.getDate() + 1);
                }

                calendarGrid.innerHTML = html;
            }

            function getMonthName(month) {
                const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',
                               'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
                return months[month];
            }

            window.renderCalendar = renderCalendar;
            window.currentMonth = currentMonth;
            window.currentYear = currentYear;

            renderCalendar(currentMonth, currentYear);
        }

        function prevMonth() {
            window.currentMonth--;
            if (window.currentMonth < 0) {
                window.currentMonth = 11;
                window.currentYear--;
            }
            window.renderCalendar(window.currentMonth, window.currentYear);
        }

        function nextMonth() {
            window.currentMonth++;
            if (window.currentMonth > 11) {
                window.currentMonth = 0;
                window.currentYear++;
            }
            window.renderCalendar(window.currentMonth, window.currentYear);
        }

        function selectDate(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();

            if (date < now && date.toDateString() !== now.toDateString()) {
                return; // Can't select past dates
            }

            selectedDate = date;

            // Update calendar display
            const calendarDays = document.querySelectorAll('.calendar-day');
            calendarDays.forEach(day => day.classList.remove('selected'));

            event.target.classList.add('selected');

            // Show time slots
            showTimeSlots();
        }

        function showTimeSlots() {
            const timeSlotsContainer = document.getElementById('timeSlots');
            const timeSlots = [
                '09:00', '10:00', '11:00', '12:00', '13:00', '14:00',
                '15:00', '16:00', '17:00', '18:00', '19:00', '20:00'
            ];

            let html = '';
            timeSlots.forEach(time => {
                const isSelected = selectedTime === time;
                html += `<div class="time-slot ${isSelected ? 'selected' : ''}" onclick="selectTime('${time}')">${time}</div>`;
            });

            timeSlotsContainer.innerHTML = html;
            timeSlotsContainer.style.display = 'grid';

            updateBookingSummary();
        }

        function selectTime(time) {
            selectedTime = time;

            // Update time slot display
            const timeSlots = document.querySelectorAll('.time-slot');
            timeSlots.forEach(slot => slot.classList.remove('selected'));

            event.target.classList.add('selected');

            updateBookingSummary();
        }

        function updateBookingSummary() {
            const summary = document.getElementById('bookingSummary');
            const serviceSelect = document.getElementById('bookingService');

            if (selectedDate && selectedTime && serviceSelect.value) {
                document.getElementById('summaryService').textContent = serviceSelect.options[serviceSelect.selectedIndex].text;
                document.getElementById('summaryDate').textContent = selectedDate.toLocaleDateString('id-ID', {
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
                });
                document.getElementById('summaryTime').textContent = selectedTime;
                document.getElementById('summaryPrice').textContent = currentBookingUMKM.harga;

                summary.style.display = 'block';
                document.getElementById('bookingSubmitBtn').disabled = false;
            } else {
                summary.style.display = 'none';
                document.getElementById('bookingSubmitBtn').disabled = true;
            }
        }

        function submitBooking() {
            const name = document.getElementById('bookingName').value;
            const phone = document.getElementById('bookingPhone').value;
            const email = document.getElementById('bookingEmail').value;
            const service = document.getElementById('bookingService').value;
            const notes = document.getElementById('bookingNotes').value;

            if (!name || !phone || !service || !selectedDate || !selectedTime) {
                alert('Mohon lengkapi semua field yang diperlukan!');
                return;
            }

            // Create booking object
            const booking = {
                id: Date.now(),
                umkmId: currentBookingUMKM.id,
                umkmName: currentBookingUMKM.nama,
                umkmCategory: currentBookingUMKM.category,
                customerName: name,
                customerPhone: phone,
                customerEmail: email,
                service: service,
                date: selectedDate.toISOString(),
                time: selectedTime,
                notes: notes,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            // Save to localStorage
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            bookings.push(booking);
            localStorage.setItem('bookings', JSON.stringify(bookings));

            // Send WhatsApp message
            const message = `Halo ${currentBookingUMKM.nama}!

Saya ingin memesan layanan:
- Nama: ${name}
- Telepon: ${phone}
- Layanan: ${service}
- Tanggal: ${selectedDate.toLocaleDateString('id-ID')}
- Waktu: ${selectedTime}
${notes ? `- Catatan: ${notes}` : ''}

Mohon konfirmasi pemesanan ini. Terima kasih!`;

            const whatsappUrl = `https://wa.me/${currentBookingUMKM.kontak.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');

            alert('Pemesanan berhasil! Anda akan diarahkan ke WhatsApp untuk konfirmasi.');
            closeBookingModal();
        }

        // Update service selection handler
        document.addEventListener('change', function(event) {
            if (event.target.id === 'bookingService') {
                updateBookingSummary();
            }
        });

        // === WHATSAPP BUSINESS INTEGRATION FUNCTIONS ===
        let currentWhatsappContact = null;
        let currentWhatsappName = null;
        let currentWhatsappCategory = null;

        function openWhatsappTemplates(contact, name, category) {
            currentWhatsappContact = contact;
            currentWhatsappName = name;
            currentWhatsappCategory = category;

            const whatsappContent = document.getElementById('whatsappModal');
            whatsappContent.style.display = 'block';

            // Initialize templates
            initializeWhatsappTemplates();
        }

        function closeWhatsappModal() {
            document.getElementById('whatsappModal').style.display = 'none';
            currentWhatsappContact = null;
            currentWhatsappName = null;
            currentWhatsappCategory = null;
        }

        function initializeWhatsappTemplates() {
            const templates = getWhatsappTemplates(currentWhatsappCategory);

            // For now, we'll use the modal for custom messages
            // Templates will be shown in a separate section
        }

        function getWhatsappTemplates(category) {
            const templates = {
                jasaSewa: [
                    {
                        icon: '',
                        title: 'Informasi Sewa Tenda',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin bertanya tentang layanan sewa tenda Anda:\n- Harga sewa per hari\n- Kapasitas tenda\n- Syarat dan ketentuan\n- Ketersediaan jadwal\n\nMohon informasi detailnya ya. Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Informasi Sound System',
                        message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan layanan sound system Anda:\n- Paket sound yang tersedia\n- Harga sewa\n- Area coverage\n- Setup dan teknisi\n\nBisa beri penawaran? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Booking Event',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin booking untuk acara:\n- Tanggal: [isi tanggal]\n- Jenis acara: [isi jenis acara]\n- Jumlah tamu: [isi jumlah]\n- Kebutuhan: Tenda + Sound System\n\nMohon konfirmasi ketersediaan dan harga. Terima kasih!`
                    }
                ],
                mebelKayu: [
                    {
                        icon: '',
                        title: 'Informasi Kursi',
                        message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan kursi kayu Anda:\n- Model kursi yang tersedia\n- Harga per unit\n- Bahan dan finishing\n- Waktu pengerjaan\n\nBisa lihat katalog lengkapnya? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Informasi Meja',
                        message: `Halo ${currentWhatsappName}!\n\nSaya butuh meja kayu untuk:\n- Ukuran yang dibutuhkan\n- Model/desain\n- Bahan kayu\n- Budget\n\nMohon rekomendasi dan harga. Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Custom Order',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin pesan custom furniture:\n- Jenis: [isi jenis]\n- Dimensi: [isi ukuran]\n- Desain: [isi deskripsi]\n- Bahan: [isi bahan]\n- Quantity: [isi jumlah]\n\nBisa diskusi detailnya? Terima kasih!`
                    }
                ],
                kesenian: [
                    {
                        icon: '',
                        title: 'Informasi Lukisan',
                        message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan lukisan Anda:\n- Tema yang tersedia\n- Ukuran dan harga\n- Teknik melukis\n- Waktu pengerjaan\n\nBisa lihat portfolio lengkapnya? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Informasi Kerajinan',
                        message: `Halo ${currentWhatsappName}!\n\nSaya suka kerajinan tangan Anda:\n- Jenis kerajinan yang dibuat\n- Harga kisaran\n- Bahan yang digunakan\n- Pesan custom\n\nMohon informasi detailnya ya. Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Komisi Karya',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin komisi karya seni:\n- Tema: [isi tema]\n- Ukuran: [isi ukuran]\n- Teknik: [isi teknik]\n- Budget: [isi budget]\n- Deadline: [isi tenggat]\n\nBisa diskusi konsepnya? Terima kasih!`
                    }
                ],
                kuliner: [
                    {
                        icon: '',
                        title: 'Informasi Menu',
                        message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan menu Anda:\n- Menu spesial hari ini\n- Harga kisaran\n- Porsi untuk berapa orang\n- Bisa pesan antar?\n\nMohon informasi lengkapnya ya. Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Pesan Catering',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin pesan catering untuk:\n- Tanggal: [isi tanggal]\n- Jumlah orang: [isi jumlah]\n- Menu pilihan: [isi menu]\n- Lokasi: [isi alamat]\n- Budget: [isi budget]\n\nBisa diskusi paketnya? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Minuman & Dessert',
                        message: `Halo ${currentWhatsappName}!\n\nSaya suka minuman Anda:\n- Variasi minuman yang ada\n- Harga per gelas/botol\n- Bisa pesan grosir?\n- Ada promo apa hari ini?\n\nMohon informasinya ya. Terima kasih!`
                    }
                ],
                otomotif: [
                    {
                        icon: '',
                        title: 'Service Motor',
                        message: `Halo ${currentWhatsappName}!\n\nSaya butuh service motor:\n- Merk/Type: [isi merk]\n- Keluhan: [isi masalah]\n- Estimasi biaya\n- Waktu pengerjaan\n\nBisa cek kondisi motor saya? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Modifikasi Motor',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin modifikasi motor:\n- Merk/Type: [isi merk]\n- Jenis modifikasi: [isi jenis]\n- Budget: [isi budget]\n- Referensi: [isi referensi]\n\nBisa konsultasi dulu? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Sparepart & Aksesoris',
                        message: `Halo ${currentWhatsappName}!\n\nSaya cari sparepart/aksesoris:\n- Untuk motor: [isi merk/type]\n- Nama part: [isi nama]\n- Quantity: [isi jumlah]\n- Ada diskon?\n\nMohon cek ketersediaan ya. Terima kasih!`
                    }
                ],
                peternakan: [
                    {
                        icon: '',
                        title: 'Informasi Ayam',
                        message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan ayam Anda:\n- Jenis ayam yang tersedia\n- Umur dan berat\n- Harga per ekor/kg\n- Cara perawatan\n\nBisa lihat kondisi ayamnya? Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Telur Ayam',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin beli telur ayam:\n- Quantity: [isi jumlah]\n- Jenis telur: [isi jenis]\n- Harga per kg/karton\n- Pengiriman ke: [isi alamat]\n\nMohon informasinya ya. Terima kasih!`
                    },
                    {
                        icon: '',
                        title: 'Pesanan Grosir',
                        message: `Halo ${currentWhatsappName}!\n\nSaya ingin pesan grosir:\n- Jenis produk: [isi jenis]\n- Quantity: [isi jumlah]\n- Harga grosir\n- Pengiriman\n- Syarat pembelian\n\nBisa diskusi harga? Terima kasih!`
                    }
                ]
            };

            return templates[category] || [
                {
                    icon: '',
                    title: 'Pesan Umum',
                    message: `Halo ${currentWhatsappName}!\n\nSaya tertarik dengan produk/layanan Anda. Bisa beri informasi lebih detail tentang:\n- Produk yang tersedia\n- Harga\n- Cara pemesanan\n- Pengiriman\n\nTerima kasih!`
                }
            ];
        }

        function sendTemplateWhatsapp(templateIndex) {
            const templates = getWhatsappTemplates(currentWhatsappCategory);
            const template = templates[templateIndex];

            if (template && currentWhatsappContact) {
                const message = template.message;
                const whatsappUrl = `https://wa.me/${currentWhatsappContact.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
                closeWhatsappModal();
            }
        }

        function sendCustomWhatsapp() {
            const message = document.getElementById('customMessage').value;

            if (message && currentWhatsappContact) {
                const whatsappUrl = `https://wa.me/${currentWhatsappContact.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
                closeWhatsappModal();
            }
        }

        // Update message preview
        document.addEventListener('input', function(event) {
            if (event.target.id === 'customMessage') {
                document.getElementById('messagePreview').textContent = event.target.value;
            }
        });
    </script>
</body>
</html>
